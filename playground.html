<!DOCTYPE html>
<html class="theme-dark">

<head>
  <meta charset="utf-8">
  <!--
  Customize this policy to fit your own app's needs. For more guidance, see:
      https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
  Some notes:
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
      * Enable inline JS: add 'unsafe-inline' to default-src
  -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">

  <meta name="theme-color" content="#007aff">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>My App</title>

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
  <link rel="icon" href="assets/icons/favicon.png">


  <link rel="stylesheet" href="framework7/framework7-bundle.min.css">
  <link rel="stylesheet" href="css/icons.css">
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/w3.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/agate.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css"> -->
</head>


<body>
  <div id="app">

    <!-- Left panel with cover effect-->
    <div id="panel-left-main" class="panel panel-left panel-cover theme-dark ">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Left MAIN Panel</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              Left MAIN panel content goes here
              <a href="/main/" class="link button">go main</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right panel with reveal effect-->
    <div id="panel-right-main" class="panel panel-right panel-reveal theme-dark">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
              <div class="title">Right MAIN Panel</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              Right MAIN panel content goes here
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="view view-main view-init safe-areas">


      <div class="page stacked" data-name="casa">
        <!-- Top Navbar -->
        <div class="navbar">
          <div class="navbar-bg"></div>
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link back">
                <i class="icon icon-back"></i>
                <span class="if-not-md">Back</span>
              </a>

              <a href="#" class="link icon-only panel-open" data-panel="left">
                <i class="icon f7-icons ios-only">menu</i>
                <i class="icon material-icons md-only">menu</i>
              </a>
            </div>

            <div class="title sliding">CASA App</div>

            <div class="right">
              <a href="#" class="link icon-only panel-open" data-panel="right">
                <i class="icon f7-icons ios-only">menu</i>
                <i class="icon material-icons md-only">menu</i>
              </a>
            </div>
          </div>
        </div>
        <!-- Toolbar-->

        <!-- Scrollable page content-->
        <div class="page-content">
          <div class="block block-strong">
            <p>Here is your blank Framework7 app. Let's see what we have here.</p>
          </div>

          <div class="block-title">Navigation</div>

          <div class="list">
            <ul>
              <li>
                <a href="/CRUDmdstate/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">CRUDmdstate</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/dbadm/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">dbADM</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/formv2x/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">FormV2x</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/formv2/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">FormV2</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/about/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">Aboutx</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/setstate/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">setstate</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/form/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">Form</div>
                  </div>
                </a>
              </li>
              <li>
                <a href="/formhelpers/" class="item-content item-link">
                  <div class="item-inner">
                    <div class="item-title">Helpers</div>
                  </div>
                </a>
              </li>
            </ul>
          </div>

          <div class="block-title">Modals</div>
          <div class="block block-strong">
            <div class="row">
              <div class="col-50">
                <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">Popup</a>
              </div>
              <div class="col-50">
                <a href="#" class="button button-raised button-fill login-screen-open"
                  data-login-screen=".login-screen">Login Screen</a>
              </div>
            </div>
          </div>

          <div class="block-title">Panels</div>
          <div class="block block-strong">
            <div class="row">
              <div class="col-50">
                <a href="#" class="button button-raised button-fill panel-open" data-panel="left">Left Panel</a>
              </div>
              <div class="col-50">
                <a href="#" class="button button-raised button-fill panel-open" data-panel="right">Right Panel</a>
              </div>
            </div>
          </div>

          <div class="block-title searchbar-hide-on-search">Page Loaders & Router</div>
          <div class="list links-list searchbar-hide-on-search">
            <ul>
              <li>
                <a href="/page-loader-template7/vladimir/123/about-me/1/?start=0&end=30#top">Template7 Page</a>
              </li>
              <li>
                <a href="/page-loader-component/vladimir/123/about-me/1/?start=0&end=30#top">Component Page</a>
              </li>
              <li>
                <a href="/load-something-that-doesnt-exist/">Default Route (404)</a>
              </li>
              <li>
                <a href="/request-and-load/user/123456/">Request Data & Load</a>
              </li>
            </ul>
            <div class="fontx">
              <div>Hello</div>
              <div>World!</div>
            </div>
            <pre>
              <code>
                <div class="fontx">
                <div>Hello</div>
                <div>World!</div>
                p { color: red; }
                body { background-color: #eee; }
              </code>
          </pre>
          </div>
        </div>
      </div>

      <div class="page" data-name="main">
        <div class="page-content">
          <h1>MAIN PAGE</h1>

          <a href="/casa/" class="link button">go casa</a>

        </div>

        <div class="navbar">
          <div class="navbar-bg"></div>
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link icon-only panel-open" data-panel="#panel-left-main">
                <i class="icon f7-icons ios-only">menu</i>
                <i class="icon material-icons md-only">menu</i>
              </a>
            </div>
            <div class="title sliding">MAIN App</div>
            <div class="right">
              <a href="#" class="link icon-only panel-open" data-panel="#panel-right-main">
                <i class="icon f7-icons ios-only">menu</i>
                <i class="icon material-icons md-only">menu</i>
              </a>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>

  <script src="//cdn.jsdelivr.net/npm/pouchdb@7.2.1/dist/pouchdb.min.js"></script>
  <script src="js/pouchdb.js "></script>
  <script src="js/pouchdb.authentication.min.js"></script>
  <script src="js/pouchdb.find.min.js "></script>
  <script src="js/pouchdb.load.min.js "></script>
  <script src="js/lodash.js"></script>
  <script src="js/he.js "></script>

  <!-- Framework7 library -->
  <script src="framework7/framework7-bundle.min.js"></script>

  <!-- App routes -->
  <!-- <script src="js/routes.js"></script> -->
  <!-- App store -->
  <!-- <script src="js/store.js"></script> -->
  <!-- App scripts -->
  <!-- <script src="js/app.js"></script> -->

  <script>
    // --------------------------------------COMPONENT REGSTRATION-------------------------------------------------------
    Framework7.registerComponent(
      // component name
      'my-list-item',

      // component function
      (props, { $h }) => {
        let foo = 'bar';

        return () => $h`
    <html>
    <h1 style="background-color:red;"><b>Custom Component:</b></h1>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="left"><a href="#" class="back link"><i class="icon icon-back-blue"></i><span>Back</span></a></div>
    <div class="center sliding">External Site</div>
  </div>
</div>
<div class="pages">
  <div data-page="externalsite" class="page">
    <div class="page-content" style="height: auto">
        <div style="height:100%">
        <a><iframe src="http://google.de" style="height:100%;width:100%"></iframe></a>
        </div>
    </div>
  </div>
</div>
    <ul>
      <li class="item-content" id="${props.id}" foo="${props.foo}">000</li>
      <li class="item-content" id="${props.id}" foo="${props.foo}">000</li>
      <li class="item-content" id="${props.id}" foo="${props.foo}">000</li>
      <li class="item-content" id="${props.id}" foo="${props.foo}">000</li>
    </ul>
    </html>
    `;
      }
    )
    // ----------------------------------------------------------------------------------------------------------------
    var $ = Dom7;
    //url: './index.html',

    var routesx = [
      {
        path: '/casa/',
        pageName: 'casa', // change to ./index.html for main page
      },

      {
        path: '/main/',
        pageName: 'main', // change to ./index.html for main page
      },

      {
        path: '(.*)',
        url: './pages/404.html',
      }
    ];

    var storex = Framework7.createStore({
      state: {
        loading: false,
        users: [],
        name: "MAKERJOE",
        pomo: (name1) => { console.log('store state function!!!', name1) },
        index: 0,
        vitems: [],
      },

      actions: {

        openAlertx({ state }, $f7) {
          $f7.dialog.alert('Hello world!');
        },

        getUsers({ state }, x) {
          state.loading = true;
          setTimeout(() => {
            state.users = ['User 1', 'User 2', 'User 3', 'User 4', 'User 5'];
            state.loading = false;
            console.log('this is a parameter outside de state', x);
          }, 30);
        },

        changeUsers({ state }) {
          state.loading = true;
          setTimeout(() => {
            state.users = ['User 11', 'User 22', 'User 33', 'User 44', 'User 55'];
            state.loading = false;
            state.name = "SOFTHRYD";
          }, 30);
        },
      },

      getters: {
        loading({ state }) {
          return state.loading;
        },
        users({ state }) {
          return state.users;
        },
        getfunc({ state }) {
          a = 1
          result = a * 2
          return result;
        },
        name({ state }) {
          return state.name;
        },
      },
    });

    var app = new Framework7({
      name: 'My App', // App name
      theme: 'auto', // Automatic theme detection
      el: '#app', // App root element
      // App store
      store: storex,
      // App routes
      routes: routesx,
      // Register service worker
      serviceWorker: {
        path: 'service-worker.js',
      },
      view: { stackPages: true }, // use for multiple stacked inside inline pages
    });

    var mainView = app.views.create('.view-main');
    //debugger

    console.log('app initiated!')
    //var response;

    var ls = app.loginScreen.create({ el: '.login-screen' });
    //ls.open(); // open loginscreen in startup screen

    setTimeout(function () {
      ls.close('#splash');
    }, 3000);

    // redirect directly to home page
    //app.views.main.router.navigate('/home/')

    // Login Screen Demo
    $('#my-login-screen .login-button').on('click', function () {
      var username = $('#my-login-screen [name="username"]').val();
      var password = $('#my-login-screen [name="password"]').val();

      // Close login screen
      app.loginScreen.close('#my-login-screen');

      function checked(x, y) {
        if (x !== '') {
          pomo = true
        }
        else {
          pomo = true
        }
        return pomo
      }

      if (checked(username, password)) {
        console.log('user fetched!')
        //if (password !== '') {
        console.log(username)
        console.log(password)
        // debugger
        // ls.close()
        // ls.open()

        // app.views.main.router.navigate('/formv2x/')
        // app.router.navigate('/formv2x/')
      }
      else {
        console.log('kaput')
        ls.close()
        ls.open()
        // app.views.main.router.navigate('/about/')
        //app.router.navigate('/about/')
      }

      // Alert username and password
      // app.dialog.alert('Username: ' + username + '<br/>Password: ' + password);
    });

    //var vitem;
    //var formData;
    //var d = new Date(2017,6,1); //ymd julio (7) = 6

    var searchkey = 'Pi';
    var output = '';

    var db = new PouchDB('alqs', { auto_compaction: true });
    var remoteCouch = 'http://localhost:5984/alqs';

    var textomes = new Array(12);
    textomes[0] = "Ene";
    textomes[1] = "Feb";
    textomes[2] = "Mar";
    textomes[3] = "Abr";
    textomes[4] = "May";
    textomes[5] = "Jun";
    textomes[6] = "Jul";
    textomes[7] = "Ago";
    textomes[8] = "Sep";
    textomes[9] = "Oct";
    textomes[10] = "Nov";
    textomes[11] = "Dic";
    //debugger
    var textomesx = new Array(12);
    textomesx[0] = "Enero";
    textomesx[1] = "Febrero";
    textomesx[2] = "Marzo";
    textomesx[3] = "Abril";
    textomesx[4] = "Mayo";
    textomesx[5] = "Junio";
    textomesx[6] = "Julio";
    textomesx[7] = "Agosto";
    textomesx[8] = "Septiembre";
    textomesx[9] = "Octubre";
    textomesx[10] = "Noviembre";
    textomesx[11] = "Diciembre";

//var dbx = new PouchDB('http://192.168.0.11:5984/mydb', {skip_setup: true});
//var remoteCouch = 'http://admin:af5f2187037d@couchdb-99bd06.smileupps.com/alqs';
//var dbusers = new PouchDB('makerjoe:hryd3757@192.168.0.11:5984/mydb', {skip_setup: true});
//var remoteCouch = 'http://softhryd.sytes.net:5984/alqs';
//var remoteCouch = 'https://makerjoe:hryd3757@bcecd732-c9c4-452a-b4a8-d9c02632a202-bluemix.cloudant.com/todos';
//var remoteCouch = 'http://makerjoe:hryd3757@192.168.0.16:5984/todos';
//var remoteCouch = 'http://192.168.0.16:5984/todos';
//http://someuser:somepassword@path.to.couchdb.com:5984/somedatabase
//https://bcecd732-c9c4-452a-b4a8-d9c02632a202-bluemix.cloudant.com
//db.setMaxListeners(20); 
//var local = new PouchDB('local_db');
//var remoteCouch = 'https://couchdb-99bd06.smileupps.com/alqs';


// app.request.get('http://127.0.0.1:5500/www/pages/test2.html', { foo: 'bar', id:5 })
//   .then(function (res) {
//     $('#articles').html(res.data);
//     hljs.highlightBlock(articles)

//     console.log(res);
//   })
//   .catch(function (err) {
//     console.log(err.xhr)
//     console.log(err.status)
//     console.log(err.message)
//   })

//debugger

//console.log(app.views.get('.view-main')); 



  </script>
</body>

</html>